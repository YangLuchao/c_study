[toc]

# 函数

## 分类

函数可分为系统函数和用户定义函数两种：

-   系统函数，即库函数：这是由编译系统提供的，用户不必自己定义这些函数，可以直接使用它们，如我们常用的打印函数printf()。

-   用户定义函数：用以解决用户的专门需要。

## 函数调用：产生随机数

```c
#include <time.h>
time_t time(time_t *t);
// 功能：获取当前系统时间
// 参数：常设置为NULL
// 返回值：当前系统时间, time_t 相当于long类型，单位为毫秒

#include <stdlib.h>
void srand(unsigned int seed);
// 功能：用来设置rand()产生随机数时的随机种子
// 参数：如果每次seed相等，rand()产生随机数相等
// 返回值：无

#include <stdlib.h>
int rand(void);
// 功能：返回一个随机数值
// 参数：无
// 返回值：随机数

#include <stdio.h>
#include <time.h>
#include <stdlib.h>

int main()
{
	time_t tm = time(NULL);//得到系统时间
	srand((unsigned int)tm);//随机种子只需要设置一次即可

	int r = rand();
	printf("r = %d\n", r);

	return 0;
}
```

# 函数的定义

>   返回类型 函数名(形式参数列表)
>
>   ​	{
>
>   ​		数据定义部分;
>
>   ​		执行语句部分;
>
>   }

![函数的定义](https://github.com/YangLuchao/c_study/blob/main/%E5%9B%BE/%E5%87%BD%E6%95%B0%E7%9A%84%E5%AE%9A%E4%B9%89.png?raw=true)

## 函数名字、形参、函数体、返回值

### 形参

在定义函数时指定的形参，==在未出现函数调用时，它们并不占内存中的存储单元==，因此称它们是形式参数或虚拟参数，简称形参，表示它们并不是实际存在的数据，所以，形参里的变量不能赋值。

在定义函数时指定的形参，可有可无，根据函数的需要来设计，==如果没有形参，圆括号内容为空，或写一个void关键字==：

```c
// 没形参， 圆括号内容为空
void max()
{
}

// 没形参， 圆括号内容为void关键字
void max(void)
{
}
```

### 函数执行流程

```c
#include <stdio.h>

void print_test()
{
	printf("this is for test\n");
}

int main()
{
	print_test();	// print_test函数的调用

	return 0;
}
```

### 函数的形参和实参

-   形参出现在函数定义中，在整个函数体内都可以使用，离开该函数则不能使用。

-   实参出现在主调函数中，进入被调函数后，实参也不能使用。

-   ==实参变量对形参变量的数据传递是“值传递”，即单向传递，只由实参传给形参，而不能由形参传回来给实参。==

-   ==在调用函数时，编译系统临时给形参分配存储单元。调用结束后，形参单元被释放。==

-   实参单元与形参单元是不同的单元。调用结束后，形参单元被释放，函数调用结束返回主调函数后则不能再使用该形参变量。实参单元仍保留并维持原值。==因此，在执行一个被调用函数时，形参的值如果发生改变，并不会改变主调函数中实参的值。==

### 函数的声明

==如果使用用户自己定义的函数，而该函数与调用它的函数（即主调函数）不在同一文件中，或者函数定义的位置在主调函数之后，则必须在调用此函数之前对被调用的函数作声明。==

所谓函数声明，就是在函数尚在未定义的情况下，事先将该函数的有关信息通知编译系统，相当于告诉编译器，函数在后面定义，以便使编译能正常进行。

==注意：一个函数只能被定义一次，但可以声明多次。==

```c
#include <stdio.h>

int max(int x, int y); // 函数的声明，分号不能省略
// int max(int, int); // 另一种方式

int main()
{
	int a = 10, b = 25, num_max = 0;
	num_max = max(a, b); // 函数的调用

	printf("num_max = %d\n", num_max);

	return 0;
}

// 函数的定义
int max(int x, int y)
{
	return x > y ? x : y;
}
```

### 函数的定义和声明的区别

1.  ==定义是指对函数功能的确立，包括指定函数名、函数类型、形参及其类型、函数体等，它是一个完整的、独立的函数单位。==
2.  ==声明的作用则是把函数的名字、函数类型以及形参的个数、类型和顺序(注意，不包括函数体)通知编译系统，==以便在对包含函数调用的语句进行编译时，据此对其进行对照检查（例如函数名是否正确，实参与形参的类型和个数是否一致）。

### main函数与exit函数

在main函数中调用exit和return结果是一样的，==但在子函数中调用return只是代表子函数终止了，在子函数中调用exit，那么程序终止==

```c
#include <stdio.h>
#include <stdlib.h>

void fun()
{
	printf("fun\n");
	//return;
	exit(0);
}

int main()
{
	fun();
	while (1);

	return 0;
}
```

## 多文件编程

### 分文件编程

-   把函数声明放在头文件xxx.h中，在主函数中包含相应头文件
-    在头文件对应的xxx.c中实现xxx.h声明的函数